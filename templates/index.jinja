{% extends "base.jinja" %}

{% block head %}
<link rel="stylesheet" href="static/glide/glide.core.min.css">
{% endblock %}

{% block title %}Эксперт по безопасности{% endblock %}

{% block content %}
    <section class="solutions-section" id="solutions">
        <div class="solutions">
            <div class="solutions-glide" style="margin: auto;">
                <div data-glide-el="track" class="glide__track">
                    <ul class="glide__slides">
                        {% for filename, title, description, link in solutions_slides %}
                            <div class="glide__slide">
                                <div class="solution-slide" style="background:linear-gradient( rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4) ), url('static/i/solution/{{ filename }}') no-repeat;background-color:#000;">
                                    <div class="solution-slide-wrapper">
                                        <div class="solution-title">{{ title }}</div>
                                        <div class="solution-description">{{ description }}</div>
                                        <div class="solution-link"><a href="{{ link }}">Подробнее</a></div>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </section>
    <input id="expand-clients-checkbox" type="checkbox" />
    <section class="clients-section">
        <div class="clients">
            {% for filename, description, link in clients %}
                <div>
                    <a target="_blank" href="{{ link }}" title="{{ description }}">
                        <div class="client-img">
                            <img src="static/i/client/{{ filename }}" />
                        </div>
                    </a>
                </div>
            {% endfor %}
            </div>
    </section>

    <label class="expand-clients-label" for="expand-clients-checkbox">
        <div class="triangle-down"></div>
    </label>

    <section class="licenses-section" id="licenses">
        <div class="heading-2">
            Лицензии
        </div>
        <div class="licenses">
            {% for filename, description in licenses.items() %}
            {% set name, ext = extract_name_and_ext(filename) %}
            <div>
                <div class="license-img">
                    <a target="_blank" href="static/i/license/orig/{{ filename }}"><img
                            src="static/i/license/preview/{{ name }}-preview.{{ ext }}" /></a>
                </div>
                <div class="license-description">{{ description }}</div>
            </div>
            {% endfor %}
        </div>
    </section>

    <section class="partners-section" id="partners">
        <div class="heading-2">
            Наши Партнёры
        </div>

        <div class="partners-glide" style="margin: auto;">
            <div data-glide-el="track" class="glide__track">
                <ul class="glide__slides">
                    {% for slide in partners_slides %}
                        <div class="glide__slide">
                            <div class="partners flex">
                                {% for filename, title, description, link in slide %}
                                <div class="partner">
                                    {% if filename %}
                                    <a target="_blank" href="{{ link }}"><img src="static/i/partner/{{ filename }}"></a>
                                    {% endif %}
                                    <div class="partner-info">
                                        <div class="partner-heading">{{ title }}</div>
                                        <div class="partner-description">{{ description }}</div>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </section>

    <section class="contact-section" id="contact">
        <div class="yandex-maps">
            <div class="yandex-maps-panel">
                <div class="yandex-maps-panel-heading">
                    Контакты
                </div>
                <div>
                    Главный офис:
                    <br>
                    127018, Москва, ул.Октябрьская, д.38, корп. 1
                </div>
                <div>
                    Дополнительный офис:
                    <br>
                    107023, Москва, ул.Электрозаводская, д.24, стр. 1
                </div>
                <div>
                    Тел./факс: +7(495) 780-35-98
                    <br>
                    <a href="mailto:info@npp-epb.ru">info@npp-epb.ru</a>
                </div>
            </div>
            <iframe id="yandex-maps" height="500" frameborder="0" allowfullscreen="true" style="position:relative; width: 100%;"></iframe>
        </div>
    </section>
    <script>
        var index_resize_timer = 0;
        function index_do_resize() {
            const yandex_maps = document.getElementById('yandex-maps');
            if (!window.matchMedia("(max-width: 858px)").matches)
                yandex_maps.src = "https://yandex.ru/map-widget/v1/-/CCU5ZHEv8C";
            else
                yandex_maps.src = "";
        }
        function index_on_resize() {
            clearTimeout(index_resize_timer);
            index_resize_timer = setTimeout(index_do_resize, 500);
        }
        window.addEventListener('load', index_do_resize);
        window.addEventListener('resize', index_on_resize);
    </script>
    <script src="static/glide/glide.min.js"></script>
    <script>
        new Glide('.solutions-glide', {
            autoplay: 10000,
        }).mount();
        new Glide('.partners-glide', {
            autoplay: 7500,
        }).mount();
    </script>
{% endblock %}
